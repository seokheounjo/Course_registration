<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>석현대학교 - 교수 목록</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<!-- 상단 네비게이션 -->
<header class="site-header">
    <div class="container header-container">
        <div class="left-header">
            <a href="/admin" style="text-decoration: none; color: white;">
                <div class="logo">석현대학교</div>
                <div class="system-name">수강신청시스템</div>
            </a>
        </div>
        <div class="user-menu">
            <span class="user-info">관리자님 환영합니다</span>
            <a href="/logout" class="logout-btn">로그아웃</a>
        </div>
    </div>
</header>

<!-- 메인 콘텐츠 -->
<div class="main-content container">
    <div class="header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1 class="page-title">교수 목록 (총 {{totalItems}}명)</h1>
        <div>
            <a href="/admin/professors/new" class="btn btn-primary">새 교수 추가</a>
            <a href="/admin" class="btn" style="background-color: #555; color: white;">관리자 메인으로</a>
        </div>
    </div>

    <!-- 검색 폼 -->
    <div class="search-container" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
        <form method="get" action="/admin/professors" style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap;">
            <div style="display: flex; flex-direction: column;">
                <label for="name" style="margin-bottom: 5px; font-weight: bold;">이름:</label>
                <input type="text" id="name" name="name" value="{{searchName}}" placeholder="교수 이름" 
                       style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 150px;">
            </div>
            <div style="display: flex; flex-direction: column;">
                <label for="department" style="margin-bottom: 5px; font-weight: bold;">학과:</label>
                <input type="text" id="department" name="department" value="{{searchDepartment}}" placeholder="학과명" 
                       style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 150px;">
            </div>
            <div style="display: flex; flex-direction: column;">
                <label for="size" style="margin-bottom: 5px; font-weight: bold;">페이지 크기:</label>
                <select id="size" name="size" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option value="10" {{#equals size 10}}selected{{/equals}}>10개씩</option>
                    <option value="20" {{#equals size 20}}selected{{/equals}}>20개씩</option>
                    <option value="50" {{#equals size 50}}selected{{/equals}}>50개씩</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px;">
                <button type="submit" class="btn btn-primary">검색</button>
                <a href="/admin/professors" class="btn" style="background-color: #6c757d; color: white;">초기화</a>
            </div>
            <!-- 숨겨진 정렬 필드 -->
            <input type="hidden" name="sortBy" value="{{sortBy}}">
            <input type="hidden" name="sortDir" value="{{sortDir}}">
        </form>
    </div>

    <table>
        <thead>
        <tr>
            <th>
                <a href="?sortBy=id&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&name={{searchName}}&department={{searchDepartment}}" 
                   style="color: inherit; text-decoration: none;">
                    ID {{#equals sortBy "id"}}{{#equals sortDir "asc"}}↑{{/equals}}{{#equals sortDir "desc"}}↓{{/equals}}{{/equals}}
                </a>
            </th>
            <th>
                <a href="?sortBy=name&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&name={{searchName}}&department={{searchDepartment}}" 
                   style="color: inherit; text-decoration: none;">
                    이름 {{#equals sortBy "name"}}{{#equals sortDir "asc"}}↑{{/equals}}{{#equals sortDir "desc"}}↓{{/equals}}{{/equals}}
                </a>
            </th>
            <th>
                <a href="?sortBy=department&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&name={{searchName}}&department={{searchDepartment}}" 
                   style="color: inherit; text-decoration: none;">
                    학과 {{#equals sortBy "department"}}{{#equals sortDir "asc"}}↑{{/equals}}{{#equals sortDir "desc"}}↓{{/equals}}{{/equals}}
                </a>
            </th>
            <th>이메일</th>
            <th>전화번호</th>
            <th>관리</th>
        </tr>
        </thead>
        <tbody>
        {{#professors}}
            <tr>
                <td>{{id}}</td>
                <td>{{name}}</td>
                <td>{{department}}</td>
                <td>{{email}}</td>
                <td>{{phone}}</td>
                <td>
                    <a href="/admin/professors/{{id}}/edit" class="btn btn-info">수정</a>
                    <a href="/admin/professors/{{id}}/delete" class="btn btn-danger" onclick="return confirm('정말 삭제하시겠습니까?');">삭제</a>
                </td>
            </tr>
        {{/professors}}
        {{^professors}}
            <tr>
                <td colspan="6" style="text-align: center; padding: 40px; color: #666;">검색 결과가 없습니다.</td>
            </tr>
        {{/professors}}
        </tbody>
    </table>

    <!-- 페이지네이션 -->
    {{#totalPages}}
    <div class="pagination" style="margin-top: 20px; display: flex; justify-content: center; align-items: center; gap: 10px;">
        <!-- 이전 페이지 -->
        {{#currentPage}}
        <a href="?page={{#minus currentPage 1}}{{/minus}}&size={{size}}&sortBy={{sortBy}}&sortDir={{sortDir}}&name={{searchName}}&department={{searchDepartment}}" 
           class="btn" style="background-color: #f8f9fa; color: #333;">이전</a>
        {{/currentPage}}
        {{^currentPage}}
        <span class="btn" style="background-color: #e9ecef; color: #6c757d; cursor: not-allowed;">이전</span>
        {{/currentPage}}

        <!-- 페이지 번호 -->
        <span style="margin: 0 20px; font-weight: bold;">
            {{#plus currentPage 1}}{{/plus}} / {{totalPages}} 페이지 
            ({{totalItems}}개 중 {{#multiply size currentPage}}{{#plus . 1}}{{/plus}}{{/multiply}} - {{#multiply size currentPage}}{{#plus . size}}{{/plus}}{{/multiply}})
        </span>

        <!-- 다음 페이지 -->
        {{#hasNext}}
        <a href="?page={{#plus currentPage 1}}{{/plus}}&size={{size}}&sortBy={{sortBy}}&sortDir={{sortDir}}&name={{searchName}}&department={{searchDepartment}}" 
           class="btn" style="background-color: #f8f9fa; color: #333;">다음</a>
        {{/hasNext}}
        {{^hasNext}}
        <span class="btn" style="background-color: #e9ecef; color: #6c757d; cursor: not-allowed;">다음</span>
        {{/hasNext}}
    </div>
    {{/totalPages}}
</div>

<!-- 푸터 이미지 -->
{{> footer}}
</body>
</html>