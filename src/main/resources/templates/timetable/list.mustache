<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>석현대학교 - 시간표 목록</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
<!-- 상단 네비게이션 -->
<header class="site-header">
    <div class="container header-container">
        <div class="left-header">
            <a href="/admin" style="text-decoration: none; color: white;">
                <div class="logo">석현대학교</div>
                <div class="system-name">수강신청시스템</div>
            </a>
        </div>
        <div class="user-menu">
            <span class="user-info">관리자님 환영합니다</span>
            <a href="/logout" class="logout-btn">로그아웃</a>
        </div>
    </div>
</header>r>

<!-- 메인 콘텐츠 -->
<div class="main-content container">
    <div class="header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1 class="page-title">시간표 목록 (총 {{totalItems}}개)</h1>
        <div>
            <a href="/timetable/new" class="btn btn-primary">새 시간표 추가</a>
            <a href="/admin" class="btn" style="background-color: #555; color: white;">관리자 메인으로</a>
        </div>
    </div>

    <!-- 검색 폼 -->
    <div class="search-container" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
        <form method="get" action="/timetable" style="display: flex; gap: 15px; align-items: end; flex-wrap: wrap;">
            <div>
                <input type="text" id="subjectName" name="subjectName" value="{{searchSubjectName}}" placeholder="과목명" 
                       style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 150px;">
            </div>
            <div>
                <input type="text" id="day" name="day" value="{{searchDay}}" placeholder="요일" 
                       style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 150px;">
            </div>
            <div>
                <input type="text" id="room" name="room" value="{{searchRoom}}" placeholder="강의실" 
                       style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 150px;">
            </div>
            <div>
                <select id="size" name="size" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option value="10">10개씩</option>
                    <option value="20" selected>20개씩</option>
                    <option value="50">50개씩</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px;">
                <button type="submit" class="btn btn-primary">검색</button>
                <a href="/timetable" class="btn" style="background-color: #6c757d; color: white;">초기화</a>
            </div>
            <input type="hidden" name="sortBy" value="{{sortBy}}">
            <input type="hidden" name="sortDir" value="{{sortDir}}">
        </form>
    </div>

    <table>
        <thead>
        <tr>
            <th>
                <a href="?sortBy=id&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&subjectName={{searchSubjectName}}&day={{searchDay}}&room={{searchRoom}}" 
                   style="color: inherit; text-decoration: none;">
                    ID
                </a>
            </th>
            <th>
                <a href="?sortBy=subjectName&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&subjectName={{searchSubjectName}}&day={{searchDay}}&room={{searchRoom}}" 
                   style="color: inherit; text-decoration: none;">
                    과목명
                </a>
            </th>
            <th>
                <a href="?sortBy=day&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&subjectName={{searchSubjectName}}&day={{searchDay}}&room={{searchRoom}}" 
                   style="color: inherit; text-decoration: none;">
                    요일
                </a>
            </th>
            <th>
                <a href="?sortBy=startTime&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&subjectName={{searchSubjectName}}&day={{searchDay}}&room={{searchRoom}}" 
                   style="color: inherit; text-decoration: none;">
                    시작 시간
                </a>
            </th>
            <th>
                <a href="?sortBy=endTime&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&subjectName={{searchSubjectName}}&day={{searchDay}}&room={{searchRoom}}" 
                   style="color: inherit; text-decoration: none;">
                    종료 시간
                </a>
            </th>
            <th>
                <a href="?sortBy=room&sortDir={{reverseSortDir}}&page={{currentPage}}&size={{size}}&subjectName={{searchSubjectName}}&day={{searchDay}}&room={{searchRoom}}" 
                   style="color: inherit; text-decoration: none;">
                    강의실
                </a>
            </th>
            <th>담당교수</th>
            <th>관리</th>
        </tr>
        </thead>
        <tbody>
        {{#timetables}}
            <tr>
                <td>{{id}}</td>
                <td>{{subjectName}}</td>
                <td>{{day}}</td>
                <td>{{startTime}}</td>
                <td>{{endTime}}</td>
                <td>{{room}}</td>
                <td>{{professorName}}</td>
                <td>
                    <a href="/timetable/{{id}}/edit" class="btn btn-info">수정</a>
                    <a href="/timetable/{{id}}/delete" class="btn btn-danger" onclick="return confirm('정말 삭제하시겠습니까?');">삭제</a>
                </td>
            </tr>
        {{/timetables}}
        {{^timetables}}
            <tr>
                <td colspan="8" style="text-align: center; padding: 40px; color: #666;">등록된 시간표가 없습니다.</td>
            </tr>
        {{/timetables}}
        </tbody>
    </table>

    <!-- 페이지네이션 -->
    {{#totalPages}}
    <div class="pagination" style="margin-top: 20px; display: flex; justify-content: center; align-items: center; gap: 10px;">
        <!-- 이전 페이지 -->
        {{#hasPrevious}}
        <a href="?page={{previousPage}}&size={{size}}&sortBy={{sortBy}}&sortDir={{sortDir}}&subjectName={{searchSubjectName}}&day={{searchDay}}&room={{searchRoom}}" 
           class="btn" style="background-color: #f8f9fa; color: #333;">이전</a>
        {{/hasPrevious}}
        {{^hasPrevious}}
        <span class="btn" style="background-color: #e9ecef; color: #6c757d; cursor: not-allowed;">이전</span>
        {{/hasPrevious}}

        <!-- 페이지 번호 -->
        <span style="margin: 0 20px; font-weight: bold;">
            {{currentPageDisplay}} / {{totalPages}} 페이지 
            ({{startItem}} - {{endItem}} / {{totalItems}}개)
        </span>

        <!-- 다음 페이지 -->
        {{#hasNext}}
        <a href="?page={{nextPage}}&size={{size}}&sortBy={{sortBy}}&sortDir={{sortDir}}&subjectName={{searchSubjectName}}&day={{searchDay}}&room={{searchRoom}}" 
           class="btn" style="background-color: #f8f9fa; color: #333;">다음</a>
        {{/hasNext}}
        {{^hasNext}}
        <span class="btn" style="background-color: #e9ecef; color: #6c757d; cursor: not-allowed;">다음</span>
        {{/hasNext}}
    </div>
    {{/totalPages}}
</div>

<!-- 푸터 이미지 -->
{{> footer}}
</body>
</html>